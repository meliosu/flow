import runtime;

import nemo;
import vm;

main() {
    src = "
        var a: [int];
        var b: int;
        {
            a := [1];
            b := app(a, 0);
        }
    ";

    program = parseAst(src);

    println("nemo ast: \n" + program);

    if (isValidProgram(ast)) {
        println("valid nemo");
        translated = translateProgram(program);
        println("vm: \n" + translated);
        printnt("vm (string): \n" + vmProgram2s(translated));
        vmProgramRun(translated);
    } else {
        println("error!");
    }
}