import runtime;

import nemo;
import vm;

main() {
    src = "
        var n: int;
        var x: int;
        var y: int;
        {
            n := 12;
            x := 0;
            y := 0;
            
            {
                {
                    (y <= n)?;
                    y := (y + (x + (x + 1)));
                    x := (x + 1);
                }*

                (!(x <= y))?;
            }
            
            x := (x - 1);
        }
    ";

    program = parseAst(src);

    println("nemo ast:");
    println(program);
    println("\n");

    if (isValidProgram(program)) {
        translated = translateProgram(program);

        println("vm:");
        println(translated);
        println("\n");

        println("vm (string):");
        println(vmProgram2s(translated));
        println("\n");

        vmProgramRun(translated, 500);
    } else {
        println("NeMo is invalid");
    }
}