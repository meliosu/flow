import runtime;

import nemo;
import vm;

main() {
    src = "
        var a: [int];
        var b: int;
        {
            {
                a := [1];
            } U {
                b := 2;
            }
        }
    ";

    program = parseAst(src);

    println("nemo ast:");
    println(program);
    println("\n");

    if (isValidProgram(program)) {
        translated = translateProgram(program);

        println("vm:");
        println(translated);
        println("\n");

        println("vm (string):");
        println(vmProgram2s(translated));
        println("\n");

        vmProgramRun(translated, 100);
    } else {
        println("NeMo is invalid");
    }
}